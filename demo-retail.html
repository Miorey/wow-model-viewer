<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <!-- Primary Meta Tags -->
    <title>WoW model viewer</title>
    <meta name="title" content="WoW model viewer" />
    <meta name="description" content="Enhance your website with our Wowhead-powered 3D model library! Showcase interactive World of Warcraft characters, items, and NPCs. Easily customize camera angles and animations for a captivating display." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://miorey.github.io/wow-model-viewer/" />
    <meta property="og:title" content="WoW model viewer" />
    <meta property="og:description" content="Enhance your website with our Wowhead-powered 3D model library! Showcase interactive World of Warcraft characters, items, and NPCs. Easily customize camera angles and animations for a captivating display." />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://miorey.github.io/wow-model-viewer/" />
    <meta property="twitter:title" content="WoW model viewer" />
    <meta property="twitter:description" content="Enhance your website with our Wowhead-powered 3D model library! Showcase interactive World of Warcraft characters, items, and NPCs. Easily customize camera angles and animations for a captivating display." />

    <!-- Meta Tags Generated with https://metatags.io -->
    <title>WoW model viewer</title>
    <script crossorigin="anonymous"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="http://localhost:3000/modelviewer/live/viewer/viewer.min.js"></script>
    <script src="./index.js" type="module"></script>
    <link href="https://fonts.cdnfonts.com/css/lifecraft" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <style>
        * {
            color: #ebdec2;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            max-height: 100vh;
            background-color: #2E2E33;
        }

        .header {
            background-color: #333;
            padding: 10px;
            text-align: center;
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow: auto; /* Add this line */
        }

        .footer {
            background-color: #333;
            padding: 10px;
            text-align: center;
        }
        h1, h2, h3, h4, h5 {
            font-family: 'LifeCraft', sans-serif;
            color: #000;
            text-shadow: 0 0 2px #f9c811, 0 0 2px #f9c811, 0 0 2px #f9c811, 0 0 2px #f9c811;
            text-align: center;
        }
        h1 {
            bottom: 0;
            left: 58px;
        }
        button, a.github {
            color: #d3b359;
            text-shadow: -2px 0 #000, 0 2px #000, 1px 0 #000, 0 -2px #000;
            font-weight: bold;
            background: #7d0b0c;
            background: -webkit-radial-gradient(#7d0b0c 30%, #4e0c0b 60%);
            background: -o-radial-gradient(#7d0b0c 30%, #4e0c0b 60%);
            background: -moz-radial-gradient(#7d0b0c 30%, #4e0c0b 60%);
            background: radial-gradient(#7d0b0c 30%, #4e0c0b 60%);
            border: 2px solid #26160c;
            transition: text-shadow 0.5s, color 0.5s, border-color 0.5s, box-shadow 0.5s, background 0.5s;
            -webkit-transition: text-shadow 0.5s, color 0.5s, border-color 0.5s, box-shadow 0.5s, background 0.5s;
            -moz-transition: text-shadow 0.5s, color 0.5s, border-color 0.5s, box-shadow 0.5s, background 0.5s;
            -o-transition: text-shadow 0.5s, color 0.5s, border-color 0.5s, box-shadow 0.5s, background 0.5s;
            margin: 4px;
        }

        a.github {
            text-decoration: none;
            display: inline-block;
            padding: 3px;
            font-size: 1.25em;
        }

        button:hover, a.github:hover {
            color: #f9c811;
            text-shadow: -2px 0 #000, 0 2px #000, 1px 0 #000, 0 -2px #000;
        }
        code {
            display: block;
            margin-top: 5px;
            margin-bottom: 5px;
        }
        .container {
            display: flex;
            flex-direction: column;
        }

        .box {
            flex: 1;
            padding: 20px;
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-top: 20px; /* Add some spacing between the buttons and the divs */
        }

        .button-container button {
            margin: 0 10px; /* Add some spacing between the buttons */
        }


        .highlight-link {
            color: #ffc400;
            text-shadow: -2px 0 #000, 0 2px #000, 1px 0 #000, 0 -2px #000;
            text-decoration: none;
            box-shadow: inset 0 -0.125rem 0 #7d0b0c;
            box-sizing: border-box;
            display: inline-block;
            padding: 0.125rem 0.125rem;
            transition: all 0.2s ease-in-out;
        }


        .highlight-link:hover {
            box-shadow: inset 0 -2rem 0 0 #7d0b0c;
            color: #ffc400;
        }

        @media screen and (min-width: 1024px) {
            .container {
                flex-direction: row;
                margin-left: 10%;
                margin-right: 10%;
            }

            .box {
                flex-basis: 33.33%;
            }

            .content {
                overflow: hidden; /* Add this line */
            }
        }
    </style>
</head>
<body>
<div class="header">
    <h1>
        WoW model viewer
    </h1>
</div>

<div class="content">
    <div class="container">
        <div class="box">
            <h2>Arthas</h2>
            <p>NPC display</p>
            <div id="model_3d1"></div>
            <div class="button-container">
                <button onclick="randAnimation(window.model1)">Rand animation</button>
                <button onclick="pauseAnimation()">Pause animation</button>
                <button onclick="fullScreen(window.model1)">Full Screen</button>
                <button onclick="changeDirection()">Change rotation</button>
            </div>
        </div>
        <div class="box">
            <h2>Atiesh GreatClock of the guardian</h2>
            <p>Item display</p>
            <div id="model_3d2"></div>
            <div class="button-container">
                <button onclick="fullScreen(window.model2)">Full Screen</button>
            </div>
        </div>
        <div class="box">
            <h2>Jane Doe</h2>
            <p>Character display</p>
            <div id="model_3d3"></div>
            <div class="button-container">
                <button onclick="randAnimation(window.model3)">Rand animation</button>
                <button onclick="fullScreen(window.model3)">Full Screen</button>
                <button onclick="switchEquipment(window.model3)">Switch Equipment</button>
                <button onclick="switchApparence(window.model3)">Switch Appearance</button>
            </div>
        </div>
    </div>
</div>

<div class="footer">
    <p>Made with ❤️ by
        <a class="highlight-link" href="https://miorey.github.io/">Miorey</a> -

        <a class="highlight-link" href="https://github.com/Miorey/wow-model-viewer">Github</a> -
        <a class="highlight-link" href="https://www.npmjs.com/package/wow-model-viewer">npm</a>
    </p>
</div>
</body>
<script type="module">
    window.CONTENT_PATH = `http://localhost:3000/modelviewer/live/`
    window.WOTLK_TO_RETAIL_DISPLAY_ID_API = undefined
    import {generateModels, modelingType} from './index.js';

    const character = {
        "race": 45,
        "gender": 0,
        "skin": 1,
        "primaryColor": 1,
        "face": 0,
        "ears": 1,
        "items": [[1, 1170], [3, 4925], [5, 9575], [6, 25235], [7, 2311], [8, 21154], [9, 14618], [10, 9534], [15, 17238], [21, 20379], [22, 28787]]
    };

    window.model1 = await generateModels(1, `#model_3d1`, {type: modelingType.NPC, id: 24949});
    window.model2 = await generateModels(1, `#model_3d2`, {type: modelingType.ITEM, id: 193841});
    window.model3 = await generateModels(1, `#model_3d3`, character);
    window.isPaused = false;
    window.isDefaultItems = true;
    window.isDefaultApparence = true;

    setInterval(() => {
        const date = new Date;
        window.model2.setAzimuth(2 * Math.PI * (date.getSeconds() / 60))
        window.model2.setZenith(Math.PI)
    }, 1000)

    let angle = 0
    let direction = 10
    setInterval(() => {
        if (Math.abs(angle) >= 2000000) {
            angle = 0
        }
        angle += direction
        window.model1.setAzimuth(2 * Math.PI * (angle / 10000))
        window.model2.setZenith(Math.PI)
    }, 1)

    /**
     *
     * @param model {WowModelViewer}
     */
    window.randAnimation = (model) => {
        const animationList = model.getListAnimations()
        const random = Math.floor(Math.random() * animationList.length);
        model.setAnimation(animationList[random])
    }

    window.pauseAnimation = () => {
        window.isPaused = !window.isPaused
        window.model1.setAnimPaused(window.isPaused)
    }

    window.fullScreen = (model) => {
        model.setFullscreen(true)
    }

    window.switchEquipment = () => {
        window.isDefaultItems = !window.isDefaultItems
        const items = (window.isDefaultItems) ? [[1, 1170], [5, 9575], [21, 20379], [22, 28787], [3, 4925]] : [[1, 178278], [20, 30581], [21, 193841], [22, null], [3, 30623]]
        for(const item of items) {
            window.model3.updateItemViewer(item[0], item[1], 0)
        }
    }

    window.switchApparence = () => {
        window.isDefaultApparence = !window.isDefaultApparence
        if(!window.isDefaultApparence) {

            window.model3.setNewAppearance({
                "skin": 4,
                "face": 0,
                "hairStyle": 1,
                "hairColor": 8,
                "facialStyle": 5,
            })
        } else {

            window.model3.setNewAppearance({
                "skin": 4,
                "face": 0,
                "hairStyle": 5,
                "hairColor": 5,
                "facialStyle": 5,
            })
        }
    }

    window.changeDirection = () => {
        direction = -1 * direction
    }
</script>
</html>
